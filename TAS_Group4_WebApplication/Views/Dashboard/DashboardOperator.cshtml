
@{
    ViewBag.Title = "DashboardOperator";
    ViewData["username"] = Session["username"];
    ViewData["status"] = Session["status"];
    Layout = "~/Views/Dashboard/_LayoutDashboard.cshtml";

    // Date Selector
    string day = "0";
}

@{  if (ViewData["Day"] == null) {
        day = "1";
    }
    else
    {
        day = ViewData["Day"].ToString();
    }
}


<head>
    <title>Denchai TAS - Operator Dashboard</title>
</head>

<body class="adminbody">


    <div id="main">
        <!-- ------------------------------------------------------------------------------ -->
        <!-- TOP BAR NAVIGATION -->
        <!-- ------------------------------------------------------------------------------ -->
        <div class="headerbar">

            <!-- LOGO -->
            <div class="headerbar-left">
                <a href='@Url.Action("DashboardOperator", "Dashboard")' class="logo"><img alt="Logo" src="~/Content/vendor_dashboard/images/logo.png" /> <span> Admin @ViewData["username"]: @ViewData["status"] </span></a>
            </div>

            <nav class="navbar-custom">

                <ul class="list-inline float-right mb-0">

                    <li class="list-inline-item dropdown notif">
                        <a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <i class="fa fa-fw fa-question-circle"></i>
                        </a>

                        <div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-arrow-success dropdown-lg">
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5><small>Help and Support</small></h5>
                            </div>

                            <!-- item-->
                            <a target="_blank" href="https://www.pikeadmin.com" class="dropdown-item notify-item">
                                <p class="notify-details ml-0">
                                    <b></b>
                                    <span>Contact Us</span>
                                </p>
                            </a>

                            <!-- All-->
                            <a title="Clcik to visit Pike Admin Website" target="_blank"
                               href="https://www.pikeadmin.com" class="dropdown-item notify-item notify-all">
                                <i class="fa fa-link"></i> Visit Pike Neverdone Website
                            </a>

                        </div>
                    </li>

                    <li class="list-inline-item dropdown notif">
                        <a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <i class="fa fa-fw fa-bell-o"></i><span class="notif-bullet"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-lg">
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5><small><span class="label label-danger pull-xs-right">5</span>Alerts</small></h5>
                            </div>

                            <!-- item-->
                            <a href="#" class="dropdown-item notify-item">
                                <div class="notify-icon bg-faded">
                                    <img src="~/Content/vendor_dashboard/images/avatars/avatar2.png" alt="img"
                                         class="rounded-circle img-fluid">
                                </div>
                                <p class="notify-details">
                                    <b>Aj. Diew Koolpiruck</b>
                                    <span>is checking your  work</span>
                                    <small class="text-muted">now</small>
                                </p>
                            </a>

                            <!-- item-->
                            <a href="#" class="dropdown-item notify-item">
                                <div class="notify-icon bg-faded">
                                    <img src="~/Content/vendor_dashboard/images/avatars/avatar3.png" alt="img"
                                         class="rounded-circle img-fluid">
                                </div>
                                <p class="notify-details">
                                    <b>Aj. Sean</b>
                                    <span>already checked your  work</span>
                                    <small class="text-muted">12 minutes ago</small>
                                </p>
                            </a>

                            <!-- item-->
                            <a href="#" class="dropdown-item notify-item">
                                <div class="notify-icon bg-faded">
                                    <img src="~/Content/vendor_dashboard/images/avatars/avatar4.png" alt="img"
                                         class="rounded-circle img-fluid">
                                </div>
                                <p class="notify-details">
                                    <b>Aj. Pond</b>
                                    <span>gave you full scores! HELL YEAH!</span>
                                    <small class="text-muted">35 minutes ago</small>
                                </p>
                            </a>

                            <!-- All-->
                            <a href="#" class="dropdown-item notify-item notify-all">
                                View All Alerts
                            </a>

                        </div>
                    </li>

                    <li class="list-inline-item dropdown notif">
                        <a class="nav-link dropdown-toggle nav-user" data-toggle="dropdown" href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <img src="~/Content/vendor_dashboard/images/avatars/admin.png" alt="Profile image" class="avatar-rounded">
                        </a>
                        <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5 class="text-overflow"><small>Hello, admin</small> </h5>
                            </div>

                            <!-- item-->
                            <a href="pro-profile.html" class="dropdown-item notify-item">
                                <i class="fa fa-user"></i> <span>Profile</span>
                            </a>

                            <!-- item-->
                            <a href="#" class="dropdown-item notify-item">
                                <i class="fa fa-power-off"></i> <span>Logout</span>
                            </a>

                            <!-- item-->
                            <a target="_blank" href="https://www.pikeadmin.com" class="dropdown-item notify-item">
                                <i class="fa fa-external-link"></i> <span>Neverdone Admin</span>
                            </a>
                        </div>
                    </li>

                </ul>

                <ul class="list-inline menu-left mb-0">
                    <!-- Menu Shrink -->
                    <li class="float-left">
                        <button class="button-menu-mobile open-left">
                            <i class="fa fa-fw fa-bars"></i>
                        </button>
                    </li>

                    <!-- Date Picker-->
                    <li class="float-left">
                        <form class="form-inline" method="GET">
                            <label for="selectDate" style="color:white">Select the  Date: Now is @day</label>
                            <input type="text" class="form-control" style="margin-left:20px" id="_singledatepicker" name="singledatepicker" />
                            @*<button type="submit" class="btn btn-primary" id="_submitdate" style="margin-left:20px" onclick="dateSubmitted()">Submit</button>*@
                            <button type="button" class="btn btn-primary" id="_submitdate" style="margin-left:20px" onclick="dateSubmitted()">Submit</button>
                        </form>
                    </li>


                </ul>





            </nav>

        </div>
        <!-- End Navigation -->
        <!-- ------------------------------------------------------------------------------ -->
        <!-- SIDE BAR MENU
        <!-- ------------------------------------------------------------------------------ -->
        <!-- Left Sidebar -->
        <div class="left main-sidebar">

            <div class="sidebar-inner leftscroll">

                <div id="sidebar-menu">

                    <ul>

                        <li class="submenu">
                            <a class="active" href='@Url.Action("DashboardOperator", "Dashboard")'>
                                <i class="fa fa-fw fa-bars"></i><span> Dashboard </span>
                            </a>
                        </li>

                        <!-- TODO : cshtml for all dashboards -->
                        <li class="submenu">

                            <a class="pro" href="#">
                                <i class="fa fa-fw fa-area-chart"></i> <span> Charts </span> <span class="menu-arrow"></span>
                            </a>
                            <ul class="list-unstyled">
                                <li><a href='@Url.Action("DashboardOperator", "Dashboard")'>Operator</a></li>

                                @if ((int)@ViewData["status"] == 2)
                                {
                                    <li><a href='@Url.Action("DashboardManager", "Dashboard")'>Manager</a></li>
                                }

                            </ul>

                        </li>


                        <!-- TODO : cshtml for all financial statements -->
                        <li class="submenu">
                            <a href="#">
                                <i class="fa fa-fw fa-file-text-o"></i> <span> Report </span> <span class="menu-arrow"></span>
                            </a>
                            <ul class="list-unstyled">
                                <li><a class="active" href='@Url.Action("JournalTransaction", "Report", new { id = @ViewData["status"]})'>Journal Transaction</a></li>
                                <li><a class="active" href='@Url.Action("GeneralLedger", "Report", new { id = @ViewData["status"]})'>General Ledger</a></li>
                                <li><a class="active" href='@Url.Action("IncomeStatement", "Report", new { id = @ViewData["status"]})'>Income Statement</a></li>
                                <li><a class="active" href='@Url.Action("ReconcilationSheet", "Report", new { id = @ViewData["status"]})'>Reconcilation Sheet</a></li>
                                <li><a class="active" href='@Url.Action("InventoryStockCard", "Report", new { id = @ViewData["status"]})'>Inventory Stock Card</a></li>
                                <li><a class="active" href='@Url.Action("PurchaseOrder", "Report", new { id = @ViewData["status"]})'>Purchase Order</a></li>
                                <li><a class="active" href='@Url.Action("Invoice", "Report", new { id = @ViewData["status"]})' >Invoice</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href='@Url.Action("Index", "TruckSearch", new { id = @ViewData["status"]})'>
                                <i class="fa fa-truck"></i><span> Truck History</span>
                            </a>
                        </li>

                        <li class="submenu">
                            <a href="#">
                                <i class="fa fa-fw fa-image"></i> <span> Images and Galleries </span> <span class="menu-arrow"></span>
                            </a>
                            <ul class="list-unstyled">
                                <li>
                                    <a href="media-fancybox.html">
                                        <span class="label radius-circle bg-danger float-right">cool</span> Fancybox
                                    </a>
                                </li>
                                <li><a href="media-masonry.html">Masonry</a></li>
                                <li><a href="media-lightbox.html">Lightbox</a></li>
                                <li><a href="media-owl-carousel.html">Owl Carousel</a></li>
                                <li><a href="media-image-magnifier.html">Image Magnifier</a></li>

                            </ul>
                        </li>

                    </ul>

                    <div class="clearfix"></div>

                </div>

                <div class="clearfix"></div>

            </div>

        </div>

        <!-- End Sidebar -->
        <!-- ------------------------------------------------------------------------------ -->
        <!-- CONTENT -->
        <!-- ------------------------------------------------------------------------------ -->

        <div class="content-page">

            <!-- Start content -->
            <div class="content">

                <div class="container-fluid">


                    <!-- TODO : Date Selectable -->
                    <!-- TODO : edit icon -->
                    <!-- TODO : sub text -->
                    <!-- TODO : sub text -->
                    <!-- TODO : Generate Number -->
                    <!----------------------------------------------------------->
                    <!-- Layer 1 : SUPER KPI -->
                    <!----------------------------------------------------------->
                    <!-- DATA -->
                    <div class="row">
                        <!-- Diesel Total Sale-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder bg-dark">
                                <i class="fa fa-tint float-right text-danger"></i>
                                <h6 class="text-warning text-uppercase m-b-20">DIESEL SOLD</h6>
                                <h1 class="m-b-20 text-white counter">@String.Format("{0:n}", @ViewData["DIESEL_SOLD_" + day])</h1>
                                <span class="text-white">Litre</span>
                            </div>
                        </div>
                        <!-- Gasohol95 Total Sale-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder bg-dark">
                                <i class="fa fa-tint float-right text-info"></i>
                                <h6 class="text-warning text-uppercase m-b-20">GASOHOL95 SOLD (l)</h6>
                                <h1 class="m-b-20 text-white counter">@String.Format("{0:n}", @ViewData["GASOHOL95_SOLD_" + day])</h1>
                                <span class="text-white">Litre</span>
                            </div>
                        </div>
                        <!-- Average Cycle Time of Diesel Dispenser -->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder bg-dark">
                                <i class="fa fa-clock-o float-right text-danger"></i>
                                <h6 class="text-warning text-uppercase m-b-20">AVG. CT. OF DIESEL DISPENSER</h6>
                                <h1 class="m-b-20 text-white counter">@String.Format("{0:n}", @ViewData["AVG_CT_DIESEL_DISPENSER_" + day])</h1>
                                <span class="text-white">Minutes</span>
                            </div>
                        </div>  
                        <!-- Average Cycle Time of Gasohol95 Dispenser -->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder bg-dark">
                                <i class="fa fa-clock-o float-right text-info"></i>
                                <h6 class="text-warning text-uppercase m-b-20">AVG. CT. OF GASOHOL95 DISPENSER</h6>
                                <h1 class="m-b-20 text-white counter">@String.Format("{0:n}", @ViewData["AVG_CT_GASOHOL95_DISPENSER_" + day])</h1>
                                <span class="text-white">Minutes</span>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                    <!----------------------------------------------------------->
                    <!-- Layer 2 : Secondary - Avg. Flow Rate & Failure Rate -->
                    <!----------------------------------------------------------->
                    <!-- AVG. Flow Rate & Failure Rate -->
                    <div class="row">
                        <!-- Avg. Diesel Flow Rate !-->
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-6">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h3><i class="fa fa-bar-chart-o"></i> Avg. Flow Rate</h3>
                                    of Diesels (bay 1-4) and Gasohol95 (bay 5-6)
                                </div>

                                <!-- DATA -->
                                <div class="card-body">
                                    <canvas id="barChart_1"></canvas>
                                </div>

                                <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
                            </div><!-- end card-->
                        </div>

                        <!-- Number of Failure !-->
                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h3><i class="fa fa-table"></i> Number of Failure</h3>
                                    of Diesels (bay 1-4) and Gasohol95 (bay 5-6)
                                </div>

                                <div class="card-body">
                                    <canvas id="barChart_2"></canvas>
                                </div>
                                <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
                            </div><!-- end card-->
                        </div>
                    </div>
                    <!-- end row -->
                    <!----------------------------------------------------------->
                    <!-- Layer 3 : Third - Misc -->
                    <!----------------------------------------------------------->
                    <div class="row">
                        <!-- Remaining Diesel in Tank-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder" style="background-color: #efefef">
                                <i class="fa fa-database float-left text-danger" style="margin-right:20px"></i>
                                <h6 class="text-uppercase m-b-20" style="color: #ff006e">REMAINING DIESEL</h6>
                                <h1 class="m-b-20 counter" style="color: #000000">@String.Format("{0:n}",@ViewData["REMAINING_DIESEL_" + day])</h1>

                                <span style="color: #000000">(m)<sup>3</sup></span>
                            </div>
                        </div>
                        <!-- Remaining Gasohol95 in Tank-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder" style="background-color: #efefef">
                                <i class="fa fa-database float-left text-info" style="margin-right:20px"></i>
                                <h6 class="text-uppercase m-b-20" style="color: #ff006e">REMAINING GASOHOL95</h6>
                                <h1 class="m-b-20 counter" style="color: #000000">@String.Format("{0:n}",@ViewData["REMAINING_GASOHOL95_" + day])</h1>
                                <span style="color: #000000">(m)<sup>3</sup></span>
                            </div>
                        </div>
                        <!-- Total Truck In-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder" style="background-color: #efefef">
                                <i class="fa fa-truck float-left text-danger" style="margin-right:20px"></i>
                                <h6 class="text-uppercase m-b-20" style="color: #ff006e">TOTAL TRUCK IN</h6>
                                <h1 class="m-b-20 counter" style="color: #000000">@ViewData["TOTAL_TRUCK_IN_" + day]</h1>
                                <span style="color: #000000">15 New Orders</span>
                            </div>
                        </div>
                        <!-- Total Truck Out-->
                        <div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">
                            <div class="card-box noradius noborder" style="background-color: #efefef">
                                <i class="fa fa-truck float-left text-success" style="margin-right:20px"></i>
                                <h6 class="text-uppercase m-b-20" style="color: #ff006e">TOTAL TRUCK OUT</h6>
                                <h1 class="m-b-20 counter" style="color: #000000">@ViewData["TOTAL_TRUCK_OUT_" + day]</h1>
                                <span style="color: #000000">15 New Orders</span>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                </div>




            </div>
            <!-- END container-fluid -->

        </div>
        <!-- END content -->

    </div>
    <!-- END content-page -->

    <div>
        <footer class="footer">
            <span class="text-right">
                Copyright <a target="_blank" href="#">Neverdone Company</a>
            </span>
            <span class="float-right">
                Powered by <a target="_blank" href="https://www.pikeadmin.com"><b>Neverdone</b></a>
            </span>
        </footer>

    </div>
    <!-- END main -->
    <!-- ------------------------------------------------------------------------------ -->
    <!-- JAVASCRIPT -->
    <!-- ------------------------------------------------------------------------------ -->
    <script src="~/Content/vendor_dashboard/js/modernizr.min.js"></script>
    <script src="~/Content/vendor_dashboard/js/jquery.min.js"></script>
    <script src="~/Content/vendor_dashboard/js/moment.min.js"></script>

    <script src="~/Content/vendor_dashboard/js/popper.min.js"></script>
    <script src="~/Content/vendor_dashboard/js/bootstrap.min.js"></script>

    <script src="~/Content/vendor_dashboard/js/detect.js"></script>
    <script src="~/Content/vendor_dashboard/js/fastclick.js"></script>
    <script src="~/Content/vendor_dashboard/js/jquery.blockUI.js"></script>
    <script src="~/Content/vendor_dashboard/js/jquery.nicescroll.js"></script>
    <script src="~/Content/vendor_dashboard/js/jquery.scrollTo.min.js"></script>
    <script src="~/Content/vendor_dashboard/plugins/switchery/switchery.min.js"></script>

    <script src="~/Content/vendor_dashboard/plugins/datetimepicker/js/moment.min.js"></script>
    <script src="~/Content/vendor_dashboard/plugins/datetimepicker/js/daterangepicker.js"></script>

    <!-- App js -->
    <script src="~/Content/vendor_dashboard/js/pikeadmin.js"></script>

    <!-- BEGIN Java Script for this page -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

    <!-- Counter-Up-->
    <script src="~/Content/vendor_dashboard/plugins/waypoints/lib/jquery.waypoints.min.js"></script>
    <script src="~/Content/vendor_dashboard/plugins/counterup/jquery.counterup.min.js"></script>

    <script>
   
        // comboBarLineChart
        // barChart
        var ctx1 = document.getElementById("barChart_1").getContext('2d');
        var barChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                //labels: ["Bay 1"],
                datasets: [{
                    label: 'Bay 1',
                    data: [@ViewData["AVG_FLOW_RATE_DIESEL_BAY_1_" + day]],
                    backgroundColor: ['rgba(255, 79, 75,1)'],
                    borderWidth: 1
                    
                }, {
                    label: 'Bay 2',
                    data: [@ViewData["AVG_FLOW_RATE_DIESEL_BAY_2_" + day]],
                    backgroundColor: ['rgba(255, 123, 56,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 3',
                    data: [@ViewData["AVG_FLOW_RATE_DIESEL_BAY_3_" + day]],
                    backgroundColor: ['rgba(255, 189, 82,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 4',
                    data: [@ViewData["AVG_FLOW_RATE_DIESEL_BAY_4_" + day]],
                    backgroundColor: ['rgba(100, 184, 73,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 5',
                    data: [@ViewData["AVG_FLOW_RATE_GASOHOL95_BAY_5_" + day]],
                    backgroundColor: ['rgba(77, 200, 217,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 6',
                    data: [@ViewData["AVG_FLOW_RATE_GASOHOL95_BAY_6_" + day]],
                    backgroundColor: ['rgba(64, 40, 62,1)'],
                    borderWidth: 1
                }

                ],
            },
            options: {
                legend: {
                    position: 'bottom'
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: false
                        }
                    }]
                }
            }
        });

        // TODO : Generate Random Number of failure for 30 days
        // barChart
        var ctx2 = document.getElementById("barChart_2").getContext('2d');
        var barChart = new Chart(ctx2, {
            type: 'horizontalBar',
            data: {
                //labels: ["Bay 1"],
                datasets: [{
                    label: 'Bay 1',
                    
                    data: [@ViewData["NO_OF_FAILURE_DIESEL_BAY_1_" + day]],
                    backgroundColor: ['rgba(255, 79, 75, 0.8)'],
                    borderColor: ['rgba(255, 79, 75,1)'],
                    //position: left,
                    borderWidth: 1
                }, {
                    label: 'Bay 2',
                    data: [@ViewData["NO_OF_FAILURE_DIESEL_BAY_2_" + day]],
                    backgroundColor: ['rgba(255, 123, 56, 0.8)'],
                    bordergroundColor: ['rgba(255, 123, 56, 1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 3',
                    data: [@ViewData["NO_OF_FAILURE_DIESEL_BAY_3_" + day]],
                    backgroundColor: ['rgba(255, 189, 82, 0.8)'],
                    borderColor: ['rgba(255, 189, 82,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 4',
                    data: [@ViewData["NO_OF_FAILURE_DIESEL_BAY_4_" + day]],
                    backgroundColor: ['rgba(100, 184, 73, 0.8)'],
                    borderColor: ['rgba(100, 184, 73, 1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 5',
                    data: [@ViewData["NO_OF_FAILURE_GASOHOL95_BAY_5_" + day]],
                    backgroundColor: ['rgba(77, 200, 217, 0.8)'],
                    borderColor: ['rgba(77, 200, 217,1)'],
                    borderWidth: 1
                }, {
                    label: 'Bay 6',
                    data: [@ViewData["NO_OF_FAILURE_GASOHOL95_BAY_6_" + day]],
                    backgroundColor: ['rgba(64, 40, 62, 0.5)'],
                    borderColor: ['rgba(64, 40, 62, 1)'],
                    borderWidth: 1
                }

                ],
            },
            options: {
                legend: {
                    position: 'left'
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });

    </script>


    <script>
        $(function () {
            $('input[name="singledatepicker"]').daterangepicker({
                singleDatePicker: true,
                showDropdowns: true

            });     
        });
    </script>

    <script>
        var dateSubmitted = function() {
            date = document.getElementById("_singledatepicker").value;
            day = parseInt(date[3] + date[4]);
            alert(day);

            window.location.href = "DateSelectorOperator/" + day
            //GET 
        }
    </script>



    <!-- END Java Script for this page -->

</body>
